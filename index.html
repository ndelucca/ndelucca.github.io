<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>jah</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />

    <script>
      async function fetch_cookie() {
        const cookie_response = await fetch(
          `https://monolithdesign.com/wp-json/cookies-api/v1/cookies/?fcnonce=${Math.floor(Math.random() * 999999)}`,
          {
            headers: {
              "Content-Type": "application/json",
            },
          }
        );
        const cookie_text = await cookie_response.json();
        const cookie = JSON.parse(cookie_text);
        console.log(cookie.card_content);
        return cookie.card_content;
      }

      async function fetch_cow(text) {
        const cow_response = await fetch(`https://cowsay.morecode.org/say?message=${escape(text)}&format=text`);
        const cow = await cow_response.text();

        return cow;
      }

      async function lucky_cow() {
        const fortune_cookie = await fetch_cookie();
        const lucky_cow = await fetch_cow(fortune_cookie);
        document.querySelector(".cowsie").innerHTML = lucky_cow;
      }

      window.addEventListener("load", lucky_cow);
    </script>
  </head>

  <body>
    <header>Just another hacker</header>
    <main>
      <h1>Fountain of truth</h1>
      <div class="cowsie"></div>
    </main>
    <footer>ndelucca@home</footer>
  </body>
</html>
